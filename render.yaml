services:
  - type: web
    name: robotable
    env: docker
    region: oregon
    plan: starter
    branch: main
    dockerfilePath: ./Dockerfile
    dockerContext: .
    healthCheckPath: /api/v1/health
    autoDeploy: true
    envVars:
      # Database connection (set in Render dashboard)
      - key: NC_DB
        sync: false

      # JWT secret for authentication (auto-generated by Render)
      - key: NC_AUTH_JWT_SECRET
        generateValue: true

      # Public URL (update after deployment)
      - key: NC_PUBLIC_URL
        value: https://robotable.onrender.com

      # Disable telemetry
      - key: NC_DISABLE_TELE
        value: true

      # Port (required by Render)
      - key: PORT
        value: 8080

# Deployment Instructions:
#
# 1. Push this repository to GitHub
#
# 2. Connect to Render:
#    - Go to https://dashboard.render.com
#    - Click "New +" â†’ "Blueprint"
#    - Connect your GitHub repository
#    - Render will auto-detect render.yaml
#
# 3. Set Environment Variables in Render Dashboard:
#    - NC_DB: Your Supabase connection string
#      Format: pg://db.[project-ref].supabase.co:5432?u=postgres&p=[password]&d=postgres
#    - NC_AUTH_JWT_SECRET: Will be auto-generated
#    - NC_PUBLIC_URL: Update to your Render URL or custom domain
#
# 4. Deploy:
#    - Click "Apply" to create service
#    - Wait for deployment (3-5 minutes)
#    - Access at: https://robotable.onrender.com
#
# Cost: Starter plan ($7/month) - supports 50-100 concurrent users
